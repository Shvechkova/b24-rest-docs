# Реакция на клик

{% note warning "Мы еще обновляем эту страницу" %}

Тут может не хватать некоторых данных — дополним в ближайшее время

{% endnote %}

{% if build == 'dev' %}

{% note alert "TO-DO _не выгружается на prod_" %}

- нужны правки под стандарт написания

{% endnote %}

{% endif %}

Действие определяет реакцию на клик по определенному элементу записи таймлайна. Существует несколько различных видов действий, каждое из которых имеет свой формат.

## Переход по ссылке

Если будет использована относительная ссылка на стандартные сущности портала, поддерживающие открытие в слайдере, будет показан слайдер. В противном случае будет обычный переход по ссылке.

#|
|| **Поле** | **Описание** ||
|| **type^*^**
[`const`](../../../../data-types.md) | Должно иметь значение `redirect` ||
|| **uri**
[`string`](../../../../data-types.md) | URI ссылки. Например `https://ya.ru` или `/crm/deal/details/1/` ||
|#

{% include [Сноска о параметрах](../../../../../_includes/required.md) %}

### Пример

```json
{
    "type": "redirect",
    "uri": "/crm/deal/details/1/"
}
```

## Rest событие

Вызов действия приведет к генерации Rest события **onCrmTimelineItemAction**. При возникновении события будут вызваны обработчики только приложения, создавшего эту запись таймлайна. В обработчик всегда будет передан контекст:

- **id** - идентификатор события,
- **entityTypeId** - идентификатор типа сущности, к которой привязано дело,
- **entityId** - идентификатор элемента этой сущности,
- **activityId** - идентификатор дела,
- **userId** - идентификатор пользователя, вызвавшего действие.

#|
|| **Поле** | **Описание** ||
|| **type^*^**
[`const`](../../../../data-types.md) | Должно иметь значение `restEvent`. ||
|| **id^*^**
[`string`](../../../../data-types.md) | Идентификатор события. Можно указать любое удобное вам значение. ||
|| **actionParams**
[`array`](../../../../data-types.md) | Массив произвольного формата, данные из которого будут переданы в обработчик события. ||
|| **animationType**
[`string`](../../../../data-types.md) | URI ссылки. Анимация, которая будет показана в момент обработки события. ||
|#

{% include [Сноска о параметрах](../../../../../_includes/required.md) %}

### Пример

```json
{
    "type": "restEvent",
    "id": "resetButtonClick",
    "actionParams": {
     "myId": 123,
     "someImportant": "qwerty"
    },
    "animationType": "disable"
}
```

## Открытие слайдера приложения

Действие не поддерживается в мобильном приложении.

Вызов действия приведет к открытию слайдера приложения, создавшего данную запись таймлайна. В слайдер будет передан контекст:

- **entityTypeId** - идентификатор типа сущности, к которой привязано дело,
- **entityId** - идентификатор элемента этой сущности,
- **activityId** - идентификатор дела.

#|
|| **Поле** | **Описание** ||
|| **type^*^**
[`const`](../../../../data-types.md) | Должно иметь значение `openRestApp`. ||
|| **actionParams**
[`array`](../../../../data-types.md) | Массив произвольного формата, данные из которого будут переданы в обработчик события. ||
|| **sliderParams**
[ActionSliderParamsDto](#ActionSliderParamsDto) | Параметры открытия. ||
|#

{% include [Сноска о параметрах](../../../../../_includes/required.md) %}

### Пример

```json
{
    "type": "openRestApp",
    "actionParams": {
        "myId": 123,
        "someImportant": "qwerty"
    },
    "sliderParams": {
        "labelText": "это приложение",
        "labelColor": "#c3b3ff",
        "labelBgColor": "violet",
        "title": "Это заголовок слайдера приложения",
        "width": 700
    }
}
```

### ActionSliderParamsDto

Параметры открытия слайдера приложения

#|
|| **Поле** | **Описание** | **Дополнительно** ||
|| **width**
[`int`](../../../../data-types.md) | Ширина слайдера, px | Не может быть использовано одновременно с leftBoundary ||
|| **leftBoundary**
[`int`](../../../../data-types.md) | Слайдер во всю ширину окна браузера с отступом слева, px | Не может быть использовано одновременно с width ||
|| **labelBgColor**
[`string`](../../../../data-types.md) | Код цвета фона кнопки закрытия слайдера | Может принимать только значения aqua, green, orange, brown, pink, blue, grey, violet ||
|| **labelColor**
[`string`](../../../../data-types.md) | Код цвета кнопки закрытия слайдера | В формате #112233 ||
|| **labelText**
[`string`](../../../../data-types.md) | Текст кнопки закрытия слайдера | ||
|| **title**
[`string`](../../../../data-types.md) | Текст заголовка окна браузера при открытии слайдера | ||
|#